<!-- ========== INDEX.HTML ========== -->
<!DOCTYPE html>
<html lang="es">
<head>


<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <script src="assets/js/kendo_v2.js"></script>
    <!-- INCLUDE HEAD -->
    <div id="head"></div>
</head>
<body>
    <!-- Page wrapper start -->
    <div class="page-wrapper">
        
        <!-- INCLUDE HEADER -->
        <div id="header"></div>

        <!-- Main container start -->
        <div class="main-container">
            
            <!-- INCLUDE SIDEBAR -->
            <div id="sidebar"></div>

            <!-- App container starts -->
            <div class="app-container">
                
                <!-- INCLUDE BREADCRUMB -->
                <div id="breadcrumb"></div>

                <!-- App body starts -->
                <div class="app-body">

                <div class="row gx-3">
                                        <div class="col-12">
                                            <div class="card mb-3">
                                                <div class="card-header">
                                                    
                                                                
                                                    <h5 class="card-title"><i class="fas fa-users me-2"></i>Usuarios Registrados</h5>
                                                </div>
                            
                                    
                                            <div class="row row-cols-1 row-cols-lg-12 align-items-stretch g-4">
                                                <div class="col">
                                                    <div class="card card-cover shadow mb-4" style="
                                                        background-image: url('app/views/img/img8.jpg');
                                                        background-size: cover; /* Para que cubra todo el espacio */
                                                background-repeat: no-repeat; /* Para que no se repita */
                                                background-position: center; /* Centrar la imagen */
                                                min-height: 200px; /* Altura mínima */
                                                    ">
                                                        <div class="p-5 text-white d-flex justify-content-between align-items-center">
                                                            <div>
                                                                <!-- Título más grueso usando fw-bold o fw-bolder -->
                                                                <h4 class="display-5 fw-bold mb-0">
                                                                    <!-- fw-bold para más grueso -->
                                                                    Usuarios
                                                                </h4>
                                                            </div>
                                                            <!-- Botón en la misma línea -->
                                                            <div>
                                                                <button type="button" class="btn btn-lg btn-light"
                                                                    data-bs-toggle="modal" data-bs-target="#altaUsuarios">
                                                                    <i class="fas fa-user-plus me-2"></i> <!-- Icono de FontAwesome -->
                                                                    Agregar Usuarios
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>


                                            </div>

                                            <div class="table-outer">
                                                <div class="table-responsive">
                                                    <div id="example">
                                                        <div id="grid"></div>

                                                    
                                                        <style>
                                                        /* Estilos para el grid */
                                                        #grid {
                                                            font-size: 14px;
                                                        }

                                                        .k-grid-header th {
                                                            background-color: #f8f9fa;
                                                            font-weight: 600;
                                                            white-space: nowrap;
                                                        }

                                                        .k-grid-content td {
                                                            vertical-align: middle;
                                                            padding: 8px 12px;
                                                        }

                                                        /* Asegurar que el contenido no se desborde */
                                                        .k-grid-content .text-truncate {
                                                            overflow: hidden;
                                                            text-overflow: ellipsis;
                                                            white-space: nowrap;
                                                        }

                                                        /* Botones de acción */
                                                        .btn-sm {
                                                            padding: 0.25rem 0.4rem;
                                                            font-size: 12px;
                                                            min-width: 32px;
                                                        }

                                                        /* Badges */
                                                        .badge {
                                                            font-size: 11px;
                                                            font-weight: 500;
                                                            padding: 0.25em 0.6em;
                                                        }

                                                        /* Fotos de usuario */
                                                        .k-grid img {
                                                            border: 2px solid #e9ecef;
                                                        }

                                                        /* Contador */
                                                        #contadorUsuarios {
                                                            font-size: 14px;
                                                            font-weight: 500;
                                                        }

                                                        /* Hover en filas */
                                                        .k-grid tbody tr:hover {
                                                            background-color: #f8f9fa;
                                                            cursor: pointer;
                                                        }

                                                        /* Ajustes responsivos */
                                                        @media (max-width: 768px) {
                                                            .k-grid {
                                                                font-size: 13px;
                                                            }

                                                            .k-grid .btn-sm {
                                                                min-width: 28px;
                                                                padding: 0.2rem 0.3rem;
                                                            }

                                                            .badge {
                                                                font-size: 10px;
                                                                padding: 0.2em 0.5em;
                                                            }
                                                        }
                                                        </style>

                                                        <!-- HTML mejorado -->
                                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                                            <h5 class="mb-0 d-flex align-items-center">
                                                            </h5>
                                                            <div class="d-flex align-items-center">
                                                                <span id="contadorUsuarios"
                                                                    class="badge bg-primary bg-opacity-10 text-primary border border-primary border-opacity-25 px-3 py-2">
                                                                    <i class="fas fa-spinner fa-spin me-1"></i> Cargando...
                                                                </span>
                                                                <button id="btnRecargarUsuarios"
                                                                    class="btn btn-sm btn-outline-primary ms-2">
                                                                    <i class="fas fa-sync-alt"></i>
                                                                </button>
                                                            </div>
                                                        </div>

                                                        <!-- Grid con contenedor responsivo -->
                                                        <div class="card border-0 shadow-sm">
                                                            <div class="card-body p-0">
                                                                <div id="grid" class="w-100"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                </div>
                <!-- Row end -->
            </div>
            <!-- App body ends -->
            <!-- Modal alta de ususarios -->
            <div class="modal fade" id="altaUsuarios" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header bg-primary text-white">
                            <h5 class="modal-title" id="staticBackdropLabel" style="color:#9ec9f1">
                                <i class="fas fa-user-plus me-2"></i>Alta de Usuario
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                                aria-label="Cerrar"></button>
                        </div>
                        <div class="modal-body">
                            <form class="FormularioAjax needs-validation"
                                action="app/ajax/usuarioAjax.php" method="POST"
                                enctype="multipart/form-data" novalidate>

                                <input type="hidden" name="modulo_usuario" value="registrar">

                                <!-- Sección de Información Personal -->
                                <div class="row mb-4">
                                    <div class="col-12">
                                        <h5 class="border-bottom pb-2">
                                            <i class="fas fa-id-card me-2"></i>Información Personal
                                        </h5>
                                    </div>
                                </div>

                                <div class="row g-3 mb-3">
                                    <div class="col-md-4">
                                        <label for="nombre" class="form-label">
                                            <i class="fas fa-user me-1"></i>Nombre(s) <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control" id="nombre" name="usuario_nombre"
                                            pattern="[a-zA-ZáéíóúÁÉÍÓÚñÑ ]{3,40}" maxlength="40" required
                                            placeholder="Ingrese su(s) nombre(s)">
                                        <div class="valid-feedback">¡Correcto!</div>
                                        <div class="invalid-feedback">
                                            Por favor ingrese un nombre válido (3-40 caracteres, solo letras y espacios)
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="apellido" class="form-label">
                                            <i class="fas fa-user me-1"></i>Apellidos <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control" id="apellido1" name="apepat"
                                            pattern="[a-zA-ZáéíóúÁÉÍÓÚñÑ ]{3,40}" maxlength="40" required
                                            placeholder="Ingrese sus apellidos">
                                        <div class="valid-feedback">¡Correcto!</div>
                                        <div class="invalid-feedback">
                                            Por favor ingrese apellidos válidos (3-40 caracteres, solo letras y
                                            espacios)
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="apellido" class="form-label">
                                            <i class="fas fa-user me-1"></i>Apellidos <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control" id="apellido2" name="apemat"
                                            pattern="[a-zA-ZáéíóúÁÉÍÓÚñÑ ]{3,40}" maxlength="40" required
                                            placeholder="Ingrese sus apellidos">
                                        <div class="valid-feedback">¡Correcto!</div>
                                        <div class="invalid-feedback">
                                            Por favor ingrese apellidos válidos (3-40 caracteres, solo letras y
                                            espacios)
                                        </div>
                                    </div>
                                </div>

                                <!-- Sección de Credenciales -->
                                <div class="row mb-4 mt-4">
                                    <div class="col-12">
                                        <h5 class="border-bottom pb-2">
                                            <i class="fas fa-key me-2"></i>Credenciales de Acceso
                                        </h5>
                                    </div>
                                </div>

                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <label for="usuario" class="form-label">
                                            <i class="fas fa-at me-1"></i>Usuario <span class="text-danger">*</span>
                                        </label>
                                        <div class="input-group has-validation">
                                            <span class="input-group-text">@</span>
                                            <input type="text" class="form-control" id="usuario" name="usuario_usuario"
                                                pattern="[a-zA-Z0-9]{4,20}" maxlength="20" required
                                                placeholder="Nombre de usuario (4-20 caracteres)">
                                            <div class="valid-feedback">¡Nombre de usuario disponible!</div>
                                            <div class="invalid-feedback">
                                                Por favor ingrese un usuario válido (4-20 caracteres, solo letras y
                                                números)
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="correo" class="form-label">
                                            <i class="fas fa-envelope me-1"></i>Correo Electrónico
                                        </label>
                                        <input type="email" class="form-control" id="correo" name="usuario_email"
                                            required maxlength="70" placeholder="ejemplo@correo.com">
                                        <div class="valid-feedback">¡Correo válido!</div>
                                        <div class="invalid-feedback">
                                            Por favor ingrese un correo electrónico válido
                                        </div>
                                    </div>
                                </div>

                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <label for="clave1" class="form-label">
                                            <i class="fas fa-lock me-1"></i>Contraseña <span
                                                class="text-danger">*</span>
                                        </label>
                                        <input type="password" class="form-control" id="clave1" name="usuario_clave_1"
                                            pattern="[a-zA-Z0-9$@.-]{7,100}" maxlength="100" required
                                            placeholder="Mínimo 7 caracteres">
                                        <div class="valid-feedback">¡Contraseña segura!</div>
                                        <div class="invalid-feedback">
                                            La contraseña debe tener al menos 7 caracteres (letras, números o $@.-)
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="clave2" class="form-label">
                                            <i class="fas fa-lock me-1"></i>Confirmar Contraseña <span
                                                class="text-danger">*</span>
                                        </label>
                                        <input type="password" class="form-control" id="clave2" name="usuario_clave_2"
                                            pattern="[a-zA-Z0-9$@.-]{7,100}" maxlength="100" required
                                            placeholder="Repita la contraseña">
                                        <div class="valid-feedback">¡Las contraseñas coinciden!</div>
                                        <div class="invalid-feedback">
                                            Las contraseñas deben coincidir
                                        </div>
                                    </div>
                                </div>

                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <label for="celular" class="form-label">
                                            <i class="fas fa-phone me-1"></i>Teléfono / Celular
                                        </label>
                                        <input type="tel" class="form-control" id="celular" name="usuario_cel"
                                            pattern="[0-9+ ]{7,15}" maxlength="15" required
                                            placeholder="Ej: +51 987 654 321">
                                        <div class="valid-feedback">¡Correcto!</div>
                                        <div class="invalid-feedback">
                                            Ingrese un número de teléfono válido (7-15 dígitos)
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="organizacion" class="form-label">
                                            <i class="fas fa-building me-1"></i>Organización
                                        </label>
                                        <select id="organizacion" class="form-select" name="usuario_organizacion">
                                            <option value="">Cargando organizaciones...</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="rol" class="form-label">
                                            <i class="fas fa-user-tag me-1"></i>Rol <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-select" id="rol" name="usuario_rol" required>
                                            <option value="" selected disabled>Seleccione un rol...</option>
                                            <option value="admin">Administrador</option>
                                            <option value="editor">Editor</option>
                                            <option value="usuario">Usuario Regular</option>
                                            <option value="invitado">Invitado</option>
                                        </select>
                                        <div class="valid-feedback">¡Selección correcta!</div>
                                        <div class="invalid-feedback">
                                            Por favor seleccione un rol para el usuario
                                        </div>
                                    </div>
                                </div>

                                <!-- Sección de Menú -->
                                <div class="row mb-4 mt-4 g-3 ">
                                    <div class="col-12 d-flex justify-content-between align-items-center">
                                        <h5 class="border-bottom pb-2 mb-0">
                                            <i class="fas fa-bars me-2"></i>Permisos de Menú
                                        </h5>
                                        <button type="button" class="btn btn-sm btn-outline-primary"
                                            id="btnAgregarMenu">
                                            <i class="fas fa-plus me-1"></i>Agregar Menú
                                        </button>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-12 ">
                                        <div id="example">
                                            <div class="demo-section wide">
                                                <select id="listboxDisponible"></select>
                                                <select id="listboxAsignado"></select>
                                                <div id="appendto"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!-- Sección de Imagen -->
                                <div class="row mb-4 mt-4">
                                    <div class="col-12">
                                        <h5 class="border-bottom pb-2">
                                            <i class="fas fa-image me-2"></i>Imagen de Perfil
                                        </h5>
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="fotoPerfil" class="form-label">
                                            <i class="fas fa-camera me-1"></i>Seleccionar Foto
                                        </label>
                                        <div class="input-group">
                                            <input type="file" class="form-control" id="fotoPerfil" name="usuario_foto"
                                                accept=".jpg, .png, .jpeg">
                                            <label class="input-group-text" for="fotoPerfil">
                                                <i class="fas fa-upload"></i>
                                            </label>
                                        </div>
                                        <small class="form-text text-muted">
                                            Formatos aceptados: JPG, JPEG, PNG. Tamaño máximo: 5MB
                                        </small>
                                        <div class="preview-container mt-2 text-center">
                                            <img id="previewImagen"
                                                src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150' viewBox='0 0 150 150'%3E%3Crect width='150' height='150' fill='%23e9ecef'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='14' fill='%236c757d'%3EPrevisualización%3C/text%3E%3C/svg%3E"
                                                alt="Previsualización" class="img-thumbnail" style="max-width: 150px;">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="alert alert-info mt-4">
                                            <h6><i class="fas fa-info-circle me-2"></i>Requisitos de la imagen:</h6>
                                            <ul class="mb-0">
                                                <li>Formato: JPG, PNG o JPEG</li>
                                                <li>Tamaño máximo: 5MB</li>
                                                <li>Resolución recomendada: 300x300 px</li>
                                                <li>Fondo claro para mejor visualización</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>


                                <!-- Campo oculto para menú seleccionado -->
                                <input type="hidden" name="usuario_menu" id="usuario_menu">
                                <input type="hidden" name="usuario_organizacion" id="usuario_organizacion_hidden">

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                <i class="fas fa-times me-1"></i>Cerrar
                            </button>
                            <button type="button" class="btn btn-secondary"
                                onclick="document.querySelector('form').reset();">
                                <i class="fas fa-broom me-1"></i>Limpiar
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-1"></i>Guardar
                            </button>
                        </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- END Modal alta de ususarios-->

            <!-- Modal para editar usuario -->
            <div class="modal fade" id="modalEditarUsuario" data-bs-backdrop="static" data-bs-keyboard="false"
                tabindex="-1" aria-labelledby="modalEditarUsuarioLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header bg-warning text-white">
                            <h5 class="modal-title" id="modalEditarUsuarioLabel">
                                <i class="fas fa-user-edit me-2"></i>Editar Usuario
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                                aria-label="Cerrar"></button>
                        </div>
                        <div class="modal-body">
                            <form class="FormularioAjax needs-validation"
                                action="app/ajax/usuarioAjax.php" method="POST"
                                enctype="multipart/form-data" novalidate>

                                <input type="hidden" name="modulo_usuario" value="actualizar">
                                <input type="hidden" name="usuario_id" id="editar_id">

                                <!-- Sección de Información Personal -->
                                <div class="row mb-4">
                                    <div class="col-12">
                                        <h5 class="border-bottom pb-2">
                                            <i class="fas fa-id-card me-2"></i>Información Personal
                                        </h5>
                                    </div>
                                </div>

                                <div class="row g-3 mb-3">
                                    <div class="col-md-4">
                                        <label for="editar_nombre" class="form-label">
                                            <i class="fas fa-user me-1"></i>Nombre(s) <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control" id="editar_nombre" name="usuario_nombre"
                                            pattern="[a-zA-ZáéíóúÁÉÍÓÚñÑ ]{3,40}" maxlength="40" required>
                                        <div class="invalid-feedback">
                                            Por favor ingrese un nombre válido (3-40 caracteres, solo letras y espacios)
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="editar_apepat" class="form-label">
                                            <i class="fas fa-user me-1"></i>Apellido Paterno <span
                                                class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control" id="editar_apepat" name="apepat"
                                            pattern="[a-zA-ZáéíóúÁÉÍÓÚñÑ ]{3,40}" maxlength="40" required>
                                        <div class="invalid-feedback">
                                            Por favor ingrese un apellido válido
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="editar_apemat" class="form-label">
                                            <i class="fas fa-user me-1"></i>Apellido Materno <span
                                                class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control" id="editar_apemat" name="apemat"
                                            pattern="[a-zA-ZáéíóúÁÉÍÓÚñÑ ]{3,40}" maxlength="40" required>
                                        <div class="invalid-feedback">
                                            Por favor ingrese un apellido válido
                                        </div>
                                    </div>
                                </div>

                                <!-- Sección de Credenciales -->
                                <div class="row mb-4 mt-4">
                                    <div class="col-12">
                                        <h5 class="border-bottom pb-2">
                                            <i class="fas fa-key me-2"></i>Credenciales de Acceso
                                        </h5>
                                    </div>
                                </div>

                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <label for="editar_usuario" class="form-label">
                                            <i class="fas fa-at me-1"></i>Usuario <span class="text-danger">*</span>
                                        </label>
                                        <div class="input-group">
                                            <span class="input-group-text">@</span>
                                            <input type="text" class="form-control" id="editar_usuario"
                                                name="usuario_usuario" pattern="[a-zA-Z0-9]{4,20}" maxlength="20"
                                                required readonly>
                                        </div>
                                        <small class="form-text text-muted">El usuario no se puede modificar</small>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="editar_correo" class="form-label">
                                            <i class="fas fa-envelope me-1"></i>Correo Electrónico <span
                                                class="text-danger">*</span>
                                        </label>
                                        <input type="email" class="form-control" id="editar_correo" name="usuario_email"
                                            maxlength="70" required>
                                        <div class="invalid-feedback">
                                            Por favor ingrese un correo electrónico válido
                                        </div>
                                    </div>
                                </div>

                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <label for="editar_celular" class="form-label">
                                            <i class="fas fa-phone me-1"></i>Teléfono / Celular
                                        </label>
                                        <input type="tel" class="form-control" id="editar_celular" name="usuario_cel"
                                            pattern="[0-9+ ]{7,15}" maxlength="15">
                                        <div class="invalid-feedback">
                                            Ingrese un número de teléfono válido (7-15 dígitos)
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="editar_rol" class="form-label">
                                            <i class="fas fa-user-tag me-1"></i>Rol <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-select" id="editar_rol" name="usuario_rol" required>
                                            <option value="" disabled>Seleccione un rol...</option>
                                            <option value="admin">Administrador</option>
                                            <option value="editor">Editor</option>
                                            <option value="usuario">Usuario Regular</option>
                                            <option value="invitado">Invitado</option>
                                        </select>
                                        <div class="invalid-feedback">
                                            Por favor seleccione un rol para el usuario
                                        </div>
                                    </div>
                                </div>

                                <!-- Cambiar contraseña (opcional) -->
                                <div class="row mb-4 mt-4">
                                    <div class="col-12">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="toggleCambiarClave">
                                            <label class="form-check-label" for="toggleCambiarClave">
                                                <i class="fas fa-key me-1"></i>¿Desea cambiar la contraseña?
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row g-3 mb-3" id="contenedorClave" style="display: none;">

                                
                                    <div class="col-md-6">
                                        <label for="editar_clave1" class="form-label">
                                            <i class="fas fa-lock me-1"></i>Nueva Contraseña
                                        </label>
                                        <input type="password" class="form-control" id="editar_clave1"
                                            name="usuario_clave_1" pattern="[a-zA-Z0-9$@.-]{7,100}" maxlength="100">
                                        <div class="invalid-feedback">
                                            La contraseña debe tener al menos 7 caracteres (letras, números o $@.-)
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="editar_clave2" class="form-label">
                                            <i class="fas fa-lock me-1"></i>Confirmar Nueva Contraseña
                                        </label>
                                        <input type="password" class="form-control" id="editar_clave2"
                                            name="usuario_clave_2" pattern="[a-zA-Z0-9$@.-]{7,100}" maxlength="100">
                                        <div class="invalid-feedback">
                                            Las contraseñas deben coincidir
                                        </div>
                                    </div>
                                </div>

                                <!-- Sección de Menú -->
                                <div class="row mb-4 mt-4">
                                    <div class="col-12 d-flex justify-content-between align-items-center">
                                        <h5 class="border-bottom pb-2 mb-0">
                                            <i class="fas fa-bars me-2"></i>Permisos de Menú
                                        </h5>
                                        <button type="button" class="btn btn-sm btn-outline-primary"
                                            id="btnAgregarMenuEditar">
                                            <i class="fas fa-plus me-1"></i>Agregar Menú
                                        </button>
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-12">
                                        <div class="demo-section wide">
                                            <select id="listboxDisponibleEditar"></select>
                                            <select id="listboxAsignadoEditar"></select>
                                            <div id="appendtoEditar"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Sección de Imagen -->
                                <div class="row mb-4 mt-4">
                                    <div class="col-12">
                                        <h5 class="border-bottom pb-2">
                                            <i class="fas fa-image me-2"></i>Imagen de Perfil
                                        </h5>
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <div class="mb-3 text-center">
                                            <div id="currentPhotoContainer">
                                                <img id="currentPhoto" src="" alt="Foto actual"
                                                    class="img-thumbnail mb-2"
                                                    style="max-width: 150px; max-height: 150px;">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="eliminarFoto"
                                                        name="eliminar_foto">
                                                    <label class="form-check-label" for="eliminarFoto">
                                                        Eliminar foto actual
                                                    </label>
                                                </div>
                                            </div>

                                            <label for="editar_fotoPerfil" class="form-label">
                                                <i class="fas fa-camera me-1"></i>Cambiar Foto
                                            </label>
                                            <div class="input-group">
                                                <input type="file" class="form-control" id="editar_fotoPerfil"
                                                    name="usuario_foto" accept=".jpg, .png, .jpeg">
                                                <label class="input-group-text" for="editar_fotoPerfil">
                                                    <i class="fas fa-upload"></i>
                                                </label>
                                            </div>
                                            <small class="form-text text-muted">
                                                Formatos aceptados: JPG, JPEG, PNG. Tamaño máximo: 5MB
                                            </small>

                                            <div class="preview-container mt-2 text-center">
                                                <img id="previewImagenEditar"
                                                    src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150' viewBox='0 0 150 150'%3E%3Crect width='150' height='150' fill='%23e9ecef'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='14' fill='%236c757d'%3EPrevisualización%3C/text%3E%3C/svg%3E"
                                                    alt="Previsualización" class="img-thumbnail"
                                                    style="max-width: 150px;">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="alert alert-info mt-4">
                                            <h6><i class="fas fa-info-circle me-2"></i>Información:</h6>
                                            <ul class="mb-0">
                                                <li>Si sube una nueva foto, reemplazará la actual</li>
                                                <li>Si marca "Eliminar foto actual", se eliminará sin reemplazo</li>
                                                <li>Formato: JPG, PNG o JPEG</li>
                                                <li>Tamaño máximo: 5MB</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Campo oculto para menú seleccionado -->
                                <input type="hidden" name="usuario_menu" id="usuario_menu_editar">
                                <input type="hidden" name="usuario_organizacion" id="usuario_organizacion_editar_hidden">

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                <i class="fas fa-times me-1"></i>Cancelar
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="limpiarFormularioEdicion()">
                                <i class="fas fa-broom me-1"></i>Restablecer
                            </button>
                            <button type="submit" class="btn btn-warning">
                                <i class="fas fa-save me-1"></i>Actualizar
                            </button>
                        </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- END Modal editar usuario -->

            <!-- Modal para agregar nuevo menú -->
            <div class="modal fade" id="modalAgregarMenu" tabindex="-1" aria-labelledby="modalAgregarMenuLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header bg-info text-white">
                            <h5 class="modal-title" id="modalAgregarMenuLabel">
                                <i class="fas fa-plus-circle me-2"></i>Agregar Nuevo Menú
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                                aria-label="Cerrar"></button>
                        </div>
                        <div class="modal-body">

                            <div class="mb-3">
                                <label for="rutaMenu" class="form-label">Ruta <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="rutaMenu" required
                                    placeholder="Ej: /dashboard, /usuarios, /reportes">
                            </div>
                            <div class="mb-3">
                                <label for="nombreMenu" class="form-label">Nombre del Menú <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="nombreMenu" required
                                    placeholder="Ej: Dashboard, Usuarios, Reportes">
                            </div>
                            <div class="mb-3">
                                <label for="iconoMenu" class="form-label">Icono <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="iconoMenu" required
                                    placeholder="Ej: fas fa-home, fas fa-users, fas fa-chart-bar">
                                <small class="form-text text-muted">
                                    Usar clases de FontAwesome (ej: fas fa-home)
                                </small>
                            </div>

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                            <button type="button" class="btn btn-primary" id="btnGuardarMenu">Guardar Menú</button>
                        </div>
                    </div>
                </div>
            </div>

                <!-- INCLUDE FOOTER -->
                <div id="footer"></div>

            </div>
            <!-- App container ends -->
        </div>
        <!-- Main container end -->
    </div>
    <!-- Page wrapper end -->

    <!-- INCLUDE SCRIPTS -->
    <div id="scripts"></div>

  
</body>
<script src="assets/js/app.js"></script>

    <!-- Required jQuery first, then Bootstrap Bundle JS -->
    <script src="assets/js/bootstrap.bundle.min.js"></script>

  
    
 <script src="assets/js/alta-usuario.js"></script>

</html>